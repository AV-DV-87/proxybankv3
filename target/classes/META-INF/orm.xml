<?xml version="1.0" encoding="UTF-8"?>
<!-- Fichier de configuration ORM (Object-Relational Mapping) qui décrit 
	le lien entre les objets Java et les tables relationnelles de la base de 
	données. Il faut déclarer un élément entity pour chaque objet Java utilisé 
	et configurer le lien des attributs Java avec les différentes colonnes de 
	la base de données. -->
<entity-mappings version="2.0"
	xmlns="http://java.sun.com/xml/ns/persistence/orm"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd">

	<entity class="fr.gtm.proxibanque.domain.Personne">	
	<inheritance strategy="JOINED"/>
		<attributes>
			<id name="id">
				<generated-value strategy="IDENTITY" />
			</id>
			<basic name="nom" />
			<basic name="prenom" />
			<basic name="adresse" />
			<basic name="telephone" />
			<basic name="email" />
		</attributes>
	</entity>
	
	<entity class="fr.gtm.proxibanque.domain.Conseiller">
		<attributes>
			<basic name="login" />
			<basic name="password" />			
			<one-to-many name="clients" mapped-by="conseiller" />				
		</attributes>
	</entity>
	
	<entity class="fr.gtm.proxibanque.domain.Client">
	
		<attributes>
		
		<many-to-one name="conseiller">
		<join-table name="client_conseiller">
		<join-column name="idClient"/>
		<inverse-join-column name="idConseiller"/>
		</join-table>
		</many-to-one>
		
		<one-to-many name="comptes" mapped-by="client" />		
		</attributes>
	</entity>
	
	<entity class="fr.gtm.proxibanque.domain.Compte">
		<attributes>
			<id name="id">
				<generated-value strategy="IDENTITY" />
			</id>
			<basic name="solde" />
			<many-to-one name="client">
			<join-table name="compte_client">
			<join-column name="idCompte"/>
			<inverse-join-column name="idClient"/>
			</join-table>	
			</many-to-one>
		</attributes>
	</entity>
	
		<entity class="fr.gtm.proxibanque.domain.CompteCourant">
		<attributes>
			<basic name="decouvert" />
		</attributes>
	</entity>
	
	<entity class="fr.gtm.proxibanque.domain.CompteEpargne">
		<attributes>
			<basic name="taux" />
		</attributes>
	</entity>
	
</entity-mappings>
